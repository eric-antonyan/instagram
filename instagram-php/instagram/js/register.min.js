const username = document.querySelector(".login-input");
const submitBtn = document.querySelector(".login__button");
const userStatus = document.querySelector("#next");

const password = document.querySelector(".login-input");
const pswdBtn = document.querySelector(".login__button");

const incorrectText = document.querySelector(".incorrect-text");

$.ajax({
  type: "get",
  url: "fetch/users",
  dataType: "JSON",
  success: function (response) {
    console.log(response);
    if (username) {
      username.oninput = () => {
        response.forEach((user) => {
          if (username.value == user.username || username.value == "") {
            submitBtn.disabled = true;
            username.classList.add("incorrect");
            incorrectText.classList.remove("hide");
          } else {
            submitBtn.disabled = false;
            username.classList.remove("incorrect");
            incorrectText.classList.add("hide");
          }
        });
      };
    }
  },
});

if (password) {
  password.oninput = () => {
    if (password.value == "") {
      submitBtn.disabled = true;
    } else {
      submitBtn.disabled = false;
    }
  };
}
